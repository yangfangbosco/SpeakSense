# SpeakSense Requirements
# On-premise Voice Interaction System

# ============ Core Dependencies ============
fastapi==0.104.1
uvicorn[standard]==0.24.0
pydantic==2.5.0
python-multipart==0.0.6
pyyaml==6.0.1

# ============ ASR (Automatic Speech Recognition) ============
openai-whisper==20231117
# Alternative: pip install git+https://github.com/openai/whisper.git

# ============ Text Processing ============
jieba==0.42.1  # Chinese word segmentation
rank-bm25==0.2.2  # BM25 algorithm for keyword search

# ============ Embeddings & Vector Search ============
# Using stable versions that are tested and compatible
huggingface-hub==0.19.4  # Required for sentence-transformers 2.2.2 (has cached_download)
transformers==4.51.3  # Updated for CosyVoice2 compatibility
sentence-transformers==2.2.2  # Stable version
chromadb==0.4.18  # Vector database
# Note: ChromaDB will automatically install required dependencies

# ============ TTS (Text-to-Speech) ============
# Only two TTS models are supported: edge-tts and CosyVoice2

# Edge TTS - Online TTS service (used for reference audio generation)
edge-tts==6.1.9  # Microsoft Edge TTS

# CosyVoice2 TTS - Primary offline TTS with zero-shot voice cloning
modelscope==1.20.0  # For model downloading
HyperPyYAML==1.2.2  # For config parsing
onnxruntime==1.18.0  # For ONNX model inference
pyworld==0.3.4  # Audio processing for CosyVoice
wetext==0.0.4  # Text normalization for CosyVoice
conformer==0.3.2  # Conformer blocks for CosyVoice
diffusers==0.29.0  # Diffusion models for CosyVoice
omegaconf==2.3.0  # Configuration management
hydra-core==1.3.2  # Configuration framework
lightning==2.2.4  # PyTorch Lightning for CosyVoice
matplotlib==3.7.5  # Plotting library for CosyVoice
onnx==1.16.0  # ONNX model format
protobuf==4.25  # Protocol buffers
rich==13.7.1  # Rich text formatting
gdown==5.1.0  # Google Drive downloader
inflect==7.3.1  # Text processing for numbers
wget==3.2  # File downloader

# ============ Audio Processing ============
librosa==0.10.2  # Updated for CosyVoice2 compatibility
soundfile==0.12.1  # Audio file I/O
pydub==0.25.1  # Audio manipulation

# ============ Database ============
# SQLite is built into Python, no additional package needed

# ============ Utilities ============
requests==2.31.0
numpy==1.23.5  # Required by matplotlib and numba, compatible with Python 3.10
torch==2.3.1  # Updated for CosyVoice2 (CPU version)
torchaudio==2.3.1  # Required by CosyVoice2
# For GPU: torch==2.3.1+cu121 -f https://download.pytorch.org/whl/torch_stable.html

# ============ Development & Testing ============
pytest==7.4.3
httpx==0.25.1  # For testing FastAPI endpoints
black==23.11.0  # Code formatting
flake8==6.1.0  # Linting

# ============ Optional Dependencies ============
# Uncomment if needed:
# python-dotenv==1.0.0  # For environment variables
# loguru==0.7.2  # Better logging
# prometheus-client==0.19.0  # Metrics monitoring
